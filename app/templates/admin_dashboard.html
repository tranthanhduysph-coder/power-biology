{% extends "base.html" %}

{% block content %}
<style>
    .admin-wrapper { width: 100%; height: 100%; overflow-y: auto; background-color: #f7fafc; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; }
    
    /* Table Responsive */
    .table-responsive { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    table { min-width: 600px; width: 100%; border-collapse: collapse; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
    
    /* Mobile CSS */
    @media (max-width: 768px) {
        .admin-wrapper { padding: 10px; }
        .container { padding: 15px; }
        .form-grid { grid-template-columns: 1fr; } /* Form xếp 1 cột trên đt */
    }
    
    /* Các style khác giữ nguyên như bản cũ */
    h1, h2 { color: #2d3748; }
    .form-control { width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; margin-bottom: 10px; }
    .btn { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; color: white; }
    .btn-primary { background: #667eea; }
    .badge { padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; }
    .badge-ai { background: #bee3f8; color: #2b6cb0; }
    .badge-gofai { background: #feebc8; color: #c05621; }
</style>

<div class="admin-wrapper">
    <div class="container">
        <h1>Admin Dashboard</h1>
        
        <div style="margin-bottom: 30px; background: #fff; padding: 20px; border: 1px solid #eee; border-radius: 8px;">
            <h2>Thêm Học Sinh</h2>
            <form method="POST">
                {{ user_form.hidden_tag() }}
                <label>Username</label>
                {{ user_form.username(class="form-control") }}
                <label>Password</label>
                {{ user_form.password(class="form-control") }}
                <label>Bot Type</label>
                {{ user_form.bot_type(class="form-control") }}
                <div style="margin-top:10px;">
                    {{ user_form.is_admin() }} <label for="is_admin">Is Admin</label>
                </div>
                {{ user_form.submit(class="btn btn-primary", style="margin-top:10px; width:100%;") }}
            </form>
        </div>

        <div class="table-responsive">
            <table>
                <thead>
                    <tr style="background:#f7fafc;">
                        <th>User</th>
                        <th>Type</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.username }}</td>
                        <td><span class="badge {{ 'badge-ai' if user.bot_type=='ai' else 'badge-gofai' }}">{{ user.bot_type }}</span></td>
                        <td>
                            <a href="{{ url_for('main.delete_user', user_id=user.id) }}" style="color:red;" onclick="return confirm('Xóa?')">Xóa</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
